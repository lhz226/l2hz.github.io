<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha256-AbA177XfpSnFEvgpYu1jMygiLabzPCJCRIBtR5jGc0k=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.13.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="python大作业（第五次）">
<meta property="og:type" content="article">
<meta property="og:title" content="python-P4">
<meta property="og:url" content="http://example.com/2023/05/27/python_5/index.html">
<meta property="og:site_name" content="lhz&#39;s blog">
<meta property="og:description" content="python大作业（第五次）">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-05-27T12:00:01.000Z">
<meta property="article:modified_time" content="2023-05-27T13:05:59.468Z">
<meta property="article:author" content="lhz">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/2023/05/27/python_5/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://example.com/2023/05/27/python_5/","path":"2023/05/27/python_5/","title":"python-P4"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>python-P4 | lhz's blog</title>
  






  <script async defer data-website-id="" src=""></script>

  <script defer data-domain="" src=""></script>

  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">lhz's blog</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>







</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">lhz</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">10</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/05/27/python_5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lhz">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lhz's blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="python-P4 | lhz's blog">
      <meta itemprop="description" content="python大作业（第五次）">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          python-P4
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2023-05-27 20:00:01 / 修改时间：21:05:59" itemprop="dateCreated datePublished" datetime="2023-05-27T20:00:01+08:00">2023-05-27</time>
    </span>

  
</div>

            <div class="post-description">python大作业（第五次）</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>bustersAgents.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># bustersAgents.py</span></span><br><span class="line"><span class="comment"># ----------------</span></span><br><span class="line"><span class="comment"># Licensing Information:  You are free to use or extend these projects for</span></span><br><span class="line"><span class="comment"># educational purposes provided that (1) you do not distribute or publish</span></span><br><span class="line"><span class="comment"># solutions, (2) you retain this notice, and (3) you provide clear</span></span><br><span class="line"><span class="comment"># attribution to UC Berkeley, including a link to http://ai.berkeley.edu.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Attribution Information: The Pacman AI projects were developed at UC Berkeley.</span></span><br><span class="line"><span class="comment"># The core projects and autograders were primarily created by John DeNero</span></span><br><span class="line"><span class="comment"># (denero@cs.berkeley.edu) and Dan Klein (klein@cs.berkeley.edu).</span></span><br><span class="line"><span class="comment"># Student side autograding was added by Brad Miller, Nick Hay, and</span></span><br><span class="line"><span class="comment"># Pieter Abbeel (pabbeel@cs.berkeley.edu).</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> util</span><br><span class="line"><span class="keyword">from</span> game <span class="keyword">import</span> Agent</span><br><span class="line"><span class="keyword">from</span> game <span class="keyword">import</span> Directions</span><br><span class="line"><span class="keyword">from</span> keyboardAgents <span class="keyword">import</span> KeyboardAgent</span><br><span class="line"><span class="keyword">import</span> inference</span><br><span class="line"><span class="keyword">import</span> busters</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NullGraphics</span>:</span><br><span class="line">    <span class="string">&quot;Placeholder for graphics&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">initialize</span>(<span class="params">self, state, isBlue = <span class="literal">False</span></span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">update</span>(<span class="params">self, state</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">pause</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">draw</span>(<span class="params">self, state</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">updateDistributions</span>(<span class="params">self, dist</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">finish</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">KeyboardInference</span>(inference.InferenceModule):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Basic inference module for use with the keyboard.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">initializeUniformly</span>(<span class="params">self, gameState</span>):</span><br><span class="line">        <span class="string">&quot;Begin with a uniform distribution over ghost positions.&quot;</span></span><br><span class="line">        self.beliefs = util.Counter()</span><br><span class="line">        <span class="keyword">for</span> p <span class="keyword">in</span> self.legalPositions: self.beliefs[p] = <span class="number">1.0</span></span><br><span class="line">        self.beliefs.normalize()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">observeUpdate</span>(<span class="params">self, observation, gameState</span>):</span><br><span class="line">        noisyDistance = observation</span><br><span class="line">        pacmanPosition = gameState.getPacmanPosition()</span><br><span class="line">        allPossible = util.Counter()</span><br><span class="line">        <span class="keyword">for</span> p <span class="keyword">in</span> self.legalPositions:</span><br><span class="line">            trueDistance = util.manhattanDistance(p, pacmanPosition)</span><br><span class="line">            <span class="keyword">if</span> noisyDistance != <span class="literal">None</span> <span class="keyword">and</span> \</span><br><span class="line">                    busters.getObservationProbability(noisyDistance, trueDistance) &gt; <span class="number">0</span>:</span><br><span class="line">                allPossible[p] = <span class="number">1.0</span></span><br><span class="line">        allPossible.normalize()</span><br><span class="line">        self.beliefs = allPossible</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">elapseTime</span>(<span class="params">self, gameState</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">getBeliefDistribution</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.beliefs</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BustersAgent</span>:</span><br><span class="line">    <span class="string">&quot;An agent that tracks and displays its beliefs about ghost positions.&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params"> self, index = <span class="number">0</span>, inference = <span class="string">&quot;ExactInference&quot;</span>, ghostAgents = <span class="literal">None</span>, observeEnable = <span class="literal">True</span>, elapseTimeEnable = <span class="literal">True</span></span>):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            inferenceType = util.lookup(inference, <span class="built_in">globals</span>())</span><br><span class="line">        <span class="keyword">except</span> Exception:</span><br><span class="line">            inferenceType = util.lookup(<span class="string">&#x27;inference.&#x27;</span> + inference, <span class="built_in">globals</span>())</span><br><span class="line">        self.inferenceModules = [inferenceType(a) <span class="keyword">for</span> a <span class="keyword">in</span> ghostAgents]</span><br><span class="line">        self.observeEnable = observeEnable</span><br><span class="line">        self.elapseTimeEnable = elapseTimeEnable</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">registerInitialState</span>(<span class="params">self, gameState</span>):</span><br><span class="line">        <span class="string">&quot;Initializes beliefs and inference modules&quot;</span></span><br><span class="line">        <span class="keyword">import</span> __main__</span><br><span class="line">        self.display = __main__._display</span><br><span class="line">        <span class="keyword">for</span> inference <span class="keyword">in</span> self.inferenceModules:</span><br><span class="line">            inference.initialize(gameState)</span><br><span class="line">        self.ghostBeliefs = [inf.getBeliefDistribution() <span class="keyword">for</span> inf <span class="keyword">in</span> self.inferenceModules]</span><br><span class="line">        self.firstMove = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">observationFunction</span>(<span class="params">self, gameState</span>):</span><br><span class="line">        <span class="string">&quot;Removes the ghost states from the gameState&quot;</span></span><br><span class="line">        agents = gameState.data.agentStates</span><br><span class="line">        gameState.data.agentStates = [agents[<span class="number">0</span>]] + [<span class="literal">None</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">len</span>(agents))]</span><br><span class="line">        <span class="keyword">return</span> gameState</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">getAction</span>(<span class="params">self, gameState</span>):</span><br><span class="line">        <span class="string">&quot;Updates beliefs, then chooses an action based on updated beliefs.&quot;</span></span><br><span class="line">        <span class="keyword">for</span> index, inf <span class="keyword">in</span> <span class="built_in">enumerate</span>(self.inferenceModules):</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> self.firstMove <span class="keyword">and</span> self.elapseTimeEnable:</span><br><span class="line">                inf.elapseTime(gameState)</span><br><span class="line">            self.firstMove = <span class="literal">False</span></span><br><span class="line">            <span class="keyword">if</span> self.observeEnable:</span><br><span class="line">                inf.observe(gameState)</span><br><span class="line">            self.ghostBeliefs[index] = inf.getBeliefDistribution()</span><br><span class="line">        self.display.updateDistributions(self.ghostBeliefs)</span><br><span class="line">        <span class="keyword">return</span> self.chooseAction(gameState)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">chooseAction</span>(<span class="params">self, gameState</span>):</span><br><span class="line">        <span class="string">&quot;By default, a BustersAgent just stops.  This should be overridden.&quot;</span></span><br><span class="line">        <span class="keyword">return</span> Directions.STOP</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BustersKeyboardAgent</span>(BustersAgent, KeyboardAgent):</span><br><span class="line">    <span class="string">&quot;An agent controlled by the keyboard that displays beliefs about ghost positions.&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, index = <span class="number">0</span>, inference = <span class="string">&quot;KeyboardInference&quot;</span>, ghostAgents = <span class="literal">None</span></span>):</span><br><span class="line">        KeyboardAgent.__init__(self, index)</span><br><span class="line">        BustersAgent.__init__(self, index, inference, ghostAgents)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">getAction</span>(<span class="params">self, gameState</span>):</span><br><span class="line">        <span class="keyword">return</span> BustersAgent.getAction(self, gameState)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">chooseAction</span>(<span class="params">self, gameState</span>):</span><br><span class="line">        <span class="keyword">return</span> KeyboardAgent.getAction(self, gameState)</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> distanceCalculator <span class="keyword">import</span> Distancer</span><br><span class="line"><span class="keyword">from</span> game <span class="keyword">import</span> Actions</span><br><span class="line"><span class="keyword">from</span> game <span class="keyword">import</span> Directions</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GreedyBustersAgent</span>(<span class="title class_ inherited__">BustersAgent</span>):</span><br><span class="line">    <span class="string">&quot;An agent that charges the closest ghost.&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">registerInitialState</span>(<span class="params">self, gameState</span>):</span><br><span class="line">        <span class="string">&quot;Pre-computes the distance between every two points.&quot;</span></span><br><span class="line">        BustersAgent.registerInitialState(self, gameState)</span><br><span class="line">        self.distancer = Distancer(gameState.data.layout, <span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">chooseAction</span>(<span class="params">self, gameState</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        First computes the most likely position of each ghost that has</span></span><br><span class="line"><span class="string">        not yet been captured, then chooses an action that brings</span></span><br><span class="line"><span class="string">        Pacman closest to the closest ghost (according to mazeDistance!).</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        pacmanPosition = gameState.getPacmanPosition()</span><br><span class="line">        legal = [a <span class="keyword">for</span> a <span class="keyword">in</span> gameState.getLegalPacmanActions()]</span><br><span class="line">        <span class="comment"># 先找到所有还未捕获的鬼怪</span></span><br><span class="line">        livingGhosts = gameState.getLivingGhosts()</span><br><span class="line">        <span class="comment"># 求出每一个鬼怪所在位置的离散分布</span></span><br><span class="line">        livingGhostPositionDistributions = \</span><br><span class="line">            [beliefs <span class="keyword">for</span> i, beliefs <span class="keyword">in</span> <span class="built_in">enumerate</span>(self.ghostBeliefs)</span><br><span class="line">             <span class="keyword">if</span> livingGhosts[i+<span class="number">1</span>]]</span><br><span class="line">        <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">        <span class="comment"># 求所有鬼怪在地图中最有可能出现的位置</span></span><br><span class="line">        <span class="comment"># LGPD.argMax()指的是在所谓位置的离散分布中概率最大的那个，即鬼怪最有可能存在的位置</span></span><br><span class="line">        GhostPositions = [LGPD.argMax() <span class="keyword">for</span> LGPD <span class="keyword">in</span> livingGhostPositionDistributions]</span><br><span class="line">        <span class="comment"># 从上述位置中求出离Pacman最近的鬼怪</span></span><br><span class="line">        nearestGhost = <span class="built_in">min</span>(GhostPositions, key=</span><br><span class="line">                           <span class="keyword">lambda</span> ghostPos:self.distancer.getDistance(pacmanPosition, ghostPos))</span><br><span class="line">        <span class="comment"># 既然最近的鬼怪已经求出来了，那么就需要找到最合适的动作，即按照给定的action可以让吃豆人离nearestGhost更近</span></span><br><span class="line">        action = <span class="built_in">min</span>(legal, key=</span><br><span class="line">                     <span class="keyword">lambda</span> a:self.distancer.getDistance(Actions.getSuccessor(pacmanPosition,a), nearestGhost))</span><br><span class="line">        <span class="comment"># 最后，返回这个action即可</span></span><br><span class="line">        <span class="keyword">return</span> action</span><br></pre></td></tr></table></figure>
<p>inference.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># inference.py</span></span><br><span class="line"><span class="comment"># ------------</span></span><br><span class="line"><span class="comment"># Licensing Information:  You are free to use or extend these projects for</span></span><br><span class="line"><span class="comment"># educational purposes provided that (1) you do not distribute or publish</span></span><br><span class="line"><span class="comment"># solutions, (2) you retain this notice, and (3) you provide clear</span></span><br><span class="line"><span class="comment"># attribution to UC Berkeley, including a link to http://ai.berkeley.edu.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Attribution Information: The Pacman AI projects were developed at UC Berkeley.</span></span><br><span class="line"><span class="comment"># The core projects and autograders were primarily created by John DeNero</span></span><br><span class="line"><span class="comment"># (denero@cs.berkeley.edu) and Dan Klein (klein@cs.berkeley.edu).</span></span><br><span class="line"><span class="comment"># Student side autograding was added by Brad Miller, Nick Hay, and</span></span><br><span class="line"><span class="comment"># Pieter Abbeel (pabbeel@cs.berkeley.edu).</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> itertools</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> busters</span><br><span class="line"><span class="keyword">import</span> game</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> util <span class="keyword">import</span> manhattanDistance, raiseNotDefined</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DiscreteDistribution</span>(<span class="title class_ inherited__">dict</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    A DiscreteDistribution models belief distributions and weight distributions</span></span><br><span class="line"><span class="string">    over a finite set of discrete keys.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, key</span>):</span><br><span class="line">        self.setdefault(key, <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dict</span>.__getitem__(self, key)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">copy</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Return a copy of the distribution.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> DiscreteDistribution(<span class="built_in">dict</span>.copy(self))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">argMax</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Return the key with the highest value.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(self.keys()) == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        <span class="built_in">all</span> = <span class="built_in">list</span>(self.items())</span><br><span class="line">        values = [x[<span class="number">1</span>] <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">all</span>]</span><br><span class="line">        maxIndex = values.index(<span class="built_in">max</span>(values))</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">all</span>[maxIndex][<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">total</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Return the sum of values for all keys.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">float</span>(<span class="built_in">sum</span>(self.values()))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">normalize</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Normalize the distribution such that the total value of all keys sums</span></span><br><span class="line"><span class="string">        to 1. The ratio of values for all keys will remain the same. In the case</span></span><br><span class="line"><span class="string">        where the total value of the distribution is 0, do nothing.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        &gt;&gt;&gt; dist = DiscreteDistribution()</span></span><br><span class="line"><span class="string">        &gt;&gt;&gt; dist[&#x27;a&#x27;] = 1</span></span><br><span class="line"><span class="string">        &gt;&gt;&gt; dist[&#x27;b&#x27;] = 2</span></span><br><span class="line"><span class="string">        &gt;&gt;&gt; dist[&#x27;c&#x27;] = 2</span></span><br><span class="line"><span class="string">        &gt;&gt;&gt; dist[&#x27;d&#x27;] = 0</span></span><br><span class="line"><span class="string">        &gt;&gt;&gt; dist.normalize()</span></span><br><span class="line"><span class="string">        &gt;&gt;&gt; list(sorted(dist.items()))</span></span><br><span class="line"><span class="string">        [(&#x27;a&#x27;, 0.2), (&#x27;b&#x27;, 0.4), (&#x27;c&#x27;, 0.4), (&#x27;d&#x27;, 0.0)]</span></span><br><span class="line"><span class="string">        &gt;&gt;&gt; dist[&#x27;e&#x27;] = 4</span></span><br><span class="line"><span class="string">        &gt;&gt;&gt; list(sorted(dist.items()))</span></span><br><span class="line"><span class="string">        [(&#x27;a&#x27;, 0.2), (&#x27;b&#x27;, 0.4), (&#x27;c&#x27;, 0.4), (&#x27;d&#x27;, 0.0), (&#x27;e&#x27;, 4)]</span></span><br><span class="line"><span class="string">        &gt;&gt;&gt; empty = DiscreteDistribution()</span></span><br><span class="line"><span class="string">        &gt;&gt;&gt; empty.normalize()</span></span><br><span class="line"><span class="string">        &gt;&gt;&gt; empty</span></span><br><span class="line"><span class="string">        &#123;&#125;</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">        <span class="comment"># 归一化主要是为了数据处理方便提出来的，把数据映射到0～1范围之内处理，更加便捷快速。</span></span><br><span class="line">        <span class="comment"># 可以把归一化理解为计算某个样本在所有样本中出现的概率</span></span><br><span class="line">        <span class="comment"># 要进行归一化，首先需要求总体样本数量total</span></span><br><span class="line">        total = self.total()</span><br><span class="line">        <span class="comment"># 根据注释的提醒，total为0的时候不要做任何事情</span></span><br><span class="line">        <span class="keyword">if</span> total!=<span class="number">0</span>:</span><br><span class="line">            <span class="comment"># 如果total不为0，则进行遍历进行归一化</span></span><br><span class="line">            <span class="keyword">for</span> k,v <span class="keyword">in</span> self.items():</span><br><span class="line">                self[k] = v/total</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">sample</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Draw a random sample from the distribution and return the key, weighted</span></span><br><span class="line"><span class="string">        by the values associated with each key.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        &gt;&gt;&gt; dist = DiscreteDistribution()</span></span><br><span class="line"><span class="string">        &gt;&gt;&gt; dist[&#x27;a&#x27;] = 1</span></span><br><span class="line"><span class="string">        &gt;&gt;&gt; dist[&#x27;b&#x27;] = 2</span></span><br><span class="line"><span class="string">        &gt;&gt;&gt; dist[&#x27;c&#x27;] = 2</span></span><br><span class="line"><span class="string">        &gt;&gt;&gt; dist[&#x27;d&#x27;] = 0</span></span><br><span class="line"><span class="string">        &gt;&gt;&gt; N = 100000.0</span></span><br><span class="line"><span class="string">        &gt;&gt;&gt; samples = [dist.sample() for _ in range(int(N))]</span></span><br><span class="line"><span class="string">        &gt;&gt;&gt; round(samples.count(&#x27;a&#x27;) * 1.0/N, 1)  # proportion of &#x27;a&#x27;</span></span><br><span class="line"><span class="string">        0.2</span></span><br><span class="line"><span class="string">        &gt;&gt;&gt; round(samples.count(&#x27;b&#x27;) * 1.0/N, 1)</span></span><br><span class="line"><span class="string">        0.4</span></span><br><span class="line"><span class="string">        &gt;&gt;&gt; round(samples.count(&#x27;c&#x27;) * 1.0/N, 1)</span></span><br><span class="line"><span class="string">        0.4</span></span><br><span class="line"><span class="string">        &gt;&gt;&gt; round(samples.count(&#x27;d&#x27;) * 1.0/N, 1)</span></span><br><span class="line"><span class="string">        0.0</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">        <span class="comment"># 所谓采样，就是根据样本出现的概率，生成单个样本</span></span><br><span class="line">        <span class="comment"># 根据幻灯的内容和上述注释文档，我们可以先取[0,1)之间的随机数u</span></span><br><span class="line">        <span class="comment"># 然后根据各个样本出现的概率，规定各个样本在[0,1)上的对应区间</span></span><br><span class="line">        <span class="comment"># 然后，只需判断随机数u落在哪一个区间内，即可返回对应的样本值</span></span><br><span class="line">        u = random.random()</span><br><span class="line">        <span class="comment"># 使用变量alpha表示区间的下限</span></span><br><span class="line">        alpha = <span class="number">0.0</span></span><br><span class="line">        <span class="keyword">for</span> key,value <span class="keyword">in</span> self.items():</span><br><span class="line">            <span class="comment"># 当随机数u落在了指定的离散分布区间内，返回对应的key即样本</span></span><br><span class="line">            <span class="keyword">if</span> alpha &lt;= u &lt; alpha+(value/self.total()):</span><br><span class="line">                <span class="keyword">return</span> key</span><br><span class="line">            <span class="comment"># 为了得到下一个分布区间的下限，需要不断地更新alpha</span></span><br><span class="line">            alpha += value/self.total()</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">InferenceModule</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    An inference module tracks a belief distribution over a ghost&#x27;s location.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment">############################################</span></span><br><span class="line">    <span class="comment"># Useful methods for all inference modules #</span></span><br><span class="line">    <span class="comment">############################################</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, ghostAgent</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Set the ghost agent for later access.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.ghostAgent = ghostAgent</span><br><span class="line">        self.index = ghostAgent.index</span><br><span class="line">        self.obs = []  <span class="comment"># most recent observation position</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">getJailPosition</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> (<span class="number">2</span> * self.ghostAgent.index - <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">getPositionDistributionHelper</span>(<span class="params">self, gameState, pos, index, agent</span>):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            jail = self.getJailPosition()</span><br><span class="line">            gameState = self.setGhostPosition(gameState, pos, index + <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">except</span> TypeError:</span><br><span class="line">            jail = self.getJailPosition(index)</span><br><span class="line">            gameState = self.setGhostPositions(gameState, pos)</span><br><span class="line">        pacmanPosition = gameState.getPacmanPosition()</span><br><span class="line">        ghostPosition = gameState.getGhostPosition(index + <span class="number">1</span>)  <span class="comment"># The position you set</span></span><br><span class="line">        dist = DiscreteDistribution()</span><br><span class="line">        <span class="keyword">if</span> pacmanPosition == ghostPosition:  <span class="comment"># The ghost has been caught!</span></span><br><span class="line">            dist[jail] = <span class="number">1.0</span></span><br><span class="line">            <span class="keyword">return</span> dist</span><br><span class="line">        pacmanSuccessorStates = game.Actions.getLegalNeighbors(pacmanPosition, \</span><br><span class="line">                gameState.getWalls())  <span class="comment"># Positions Pacman can move to</span></span><br><span class="line">        <span class="keyword">if</span> ghostPosition <span class="keyword">in</span> pacmanSuccessorStates:  <span class="comment"># Ghost could get caught</span></span><br><span class="line">            mult = <span class="number">1.0</span> / <span class="built_in">float</span>(<span class="built_in">len</span>(pacmanSuccessorStates))</span><br><span class="line">            dist[jail] = mult</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            mult = <span class="number">0.0</span></span><br><span class="line">        actionDist = agent.getDistribution(gameState)</span><br><span class="line">        <span class="keyword">for</span> action, prob <span class="keyword">in</span> actionDist.items():</span><br><span class="line">            successorPosition = game.Actions.getSuccessor(ghostPosition, action)</span><br><span class="line">            <span class="keyword">if</span> successorPosition <span class="keyword">in</span> pacmanSuccessorStates:  <span class="comment"># Ghost could get caught</span></span><br><span class="line">                denom = <span class="built_in">float</span>(<span class="built_in">len</span>(actionDist))</span><br><span class="line">                dist[jail] += prob * (<span class="number">1.0</span> / denom) * (<span class="number">1.0</span> - mult)</span><br><span class="line">                dist[successorPosition] = prob * ((denom - <span class="number">1.0</span>) / denom) * (<span class="number">1.0</span> - mult)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                dist[successorPosition] = prob * (<span class="number">1.0</span> - mult)</span><br><span class="line">        <span class="keyword">return</span> dist</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">getPositionDistribution</span>(<span class="params">self, gameState, pos, index=<span class="literal">None</span>, agent=<span class="literal">None</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Return a distribution over successor positions of the ghost from the</span></span><br><span class="line"><span class="string">        given gameState. You must first place the ghost in the gameState, using</span></span><br><span class="line"><span class="string">        setGhostPosition below.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> index == <span class="literal">None</span>:</span><br><span class="line">            index = self.index - <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> agent == <span class="literal">None</span>:</span><br><span class="line">            agent = self.ghostAgent</span><br><span class="line">        <span class="keyword">return</span> self.getPositionDistributionHelper(gameState, pos, index, agent)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">getObservationProb</span>(<span class="params">self, noisyDistance, pacmanPosition, ghostPosition, jailPosition</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Return the probability P(noisyDistance | pacmanPosition, ghostPosition).</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">        <span class="comment"># 本函数主要目的是计算P(noisyDistance | pacmanPosition, ghostPosition)</span></span><br><span class="line">        <span class="comment"># 根据题目描述，需要判定鬼怪是否已经被送到jail中</span></span><br><span class="line">        <span class="keyword">if</span> ghostPosition == jailPosition:</span><br><span class="line">            <span class="comment"># 该分支表示鬼怪在监狱中，即noisyDistance为None的概率为100%</span></span><br><span class="line">            <span class="keyword">if</span> noisyDistance == <span class="literal">None</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1.0</span></span><br><span class="line">            <span class="comment"># 该分支表示鬼怪在监狱中，即noisyDistance为None的概率为0%</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0.0</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># 该分支表示鬼怪不在监狱中，即noisyDistance为None的概率为0%</span></span><br><span class="line">            <span class="keyword">if</span> noisyDistance == <span class="literal">None</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0.0</span></span><br><span class="line">            <span class="comment"># 该分支表示鬼怪不在监狱中，返回在当前状态下，noisyDistance的概率</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                trueDistance = manhattanDistance(pacmanPosition, ghostPosition)</span><br><span class="line">                <span class="keyword">return</span> busters.getObservationProbability(noisyDistance, trueDistance)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setGhostPosition</span>(<span class="params">self, gameState, ghostPosition, index</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Set the position of the ghost for this inference module to the specified</span></span><br><span class="line"><span class="string">        position in the supplied gameState.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Note that calling setGhostPosition does not change the position of the</span></span><br><span class="line"><span class="string">        ghost in the GameState object used for tracking the true progression of</span></span><br><span class="line"><span class="string">        the game.  The code in inference.py only ever receives a deep copy of</span></span><br><span class="line"><span class="string">        the GameState object which is responsible for maintaining game state,</span></span><br><span class="line"><span class="string">        not a reference to the original object.  Note also that the ghost</span></span><br><span class="line"><span class="string">        distance observations are stored at the time the GameState object is</span></span><br><span class="line"><span class="string">        created, so changing the position of the ghost will not affect the</span></span><br><span class="line"><span class="string">        functioning of observe.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        conf = game.Configuration(ghostPosition, game.Directions.STOP)</span><br><span class="line">        gameState.data.agentStates[index] = game.AgentState(conf, <span class="literal">False</span>)</span><br><span class="line">        <span class="keyword">return</span> gameState</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setGhostPositions</span>(<span class="params">self, gameState, ghostPositions</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Sets the position of all ghosts to the values in ghostPositions.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">for</span> index, pos <span class="keyword">in</span> <span class="built_in">enumerate</span>(ghostPositions):</span><br><span class="line">            conf = game.Configuration(pos, game.Directions.STOP)</span><br><span class="line">            gameState.data.agentStates[index + <span class="number">1</span>] = game.AgentState(conf, <span class="literal">False</span>)</span><br><span class="line">        <span class="keyword">return</span> gameState</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">observe</span>(<span class="params">self, gameState</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Collect the relevant noisy distance observation and pass it along.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        distances = gameState.getNoisyGhostDistances()</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(distances) &gt;= self.index:  <span class="comment"># Check for missing observations</span></span><br><span class="line">            obs = distances[self.index - <span class="number">1</span>]</span><br><span class="line">            self.obs = obs</span><br><span class="line">            self.observeUpdate(obs, gameState)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">initialize</span>(<span class="params">self, gameState</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Initialize beliefs to a uniform distribution over all legal positions.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.legalPositions = [p <span class="keyword">for</span> p <span class="keyword">in</span> gameState.getWalls().asList(<span class="literal">False</span>) <span class="keyword">if</span> p[<span class="number">1</span>] &gt; <span class="number">1</span>]</span><br><span class="line">        self.allPositions = self.legalPositions + [self.getJailPosition()]</span><br><span class="line">        self.initializeUniformly(gameState)</span><br><span class="line"></span><br><span class="line">    <span class="comment">######################################</span></span><br><span class="line">    <span class="comment"># Methods that need to be overridden #</span></span><br><span class="line">    <span class="comment">######################################</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">initializeUniformly</span>(<span class="params">self, gameState</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Set the belief state to a uniform prior belief over all positions.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">raise</span> NotImplementedError</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">observeUpdate</span>(<span class="params">self, observation, gameState</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Update beliefs based on the given distance observation and gameState.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">raise</span> NotImplementedError</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">elapseTime</span>(<span class="params">self, gameState</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Predict beliefs for the next time step from a gameState.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">raise</span> NotImplementedError</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">getBeliefDistribution</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Return the agent&#x27;s current belief state, a distribution over ghost</span></span><br><span class="line"><span class="string">        locations conditioned on all evidence so far.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">raise</span> NotImplementedError</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ExactInference</span>(<span class="title class_ inherited__">InferenceModule</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    The exact dynamic inference module should use forward algorithm updates to</span></span><br><span class="line"><span class="string">    compute the exact belief function at each time step.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">initializeUniformly</span>(<span class="params">self, gameState</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Begin with a uniform distribution over legal ghost positions (i.e., not</span></span><br><span class="line"><span class="string">        including the jail position).</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.beliefs = DiscreteDistribution()</span><br><span class="line">        <span class="keyword">for</span> p <span class="keyword">in</span> self.legalPositions:</span><br><span class="line">            self.beliefs[p] = <span class="number">1.0</span></span><br><span class="line">        self.beliefs.normalize()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">observeUpdate</span>(<span class="params">self, observation, gameState</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Update beliefs based on the distance observation and Pacman&#x27;s position.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        The observation is the noisy Manhattan distance to the ghost you are</span></span><br><span class="line"><span class="string">        tracking.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        self.allPositions is a list of the possible ghost positions, including</span></span><br><span class="line"><span class="string">        the jail position. You should only consider positions that are in</span></span><br><span class="line"><span class="string">        self.allPositions.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        The update model is not entirely stationary: it may depend on Pacman&#x27;s</span></span><br><span class="line"><span class="string">        current position. However, this is not a problem, as Pacman&#x27;s current</span></span><br><span class="line"><span class="string">        position is known.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">        <span class="comment"># 本题的要求就是编写不断更新置信网络的函数</span></span><br><span class="line">        <span class="comment"># 先获取旧的置信网络数据(其本质就是一个离散分布)</span></span><br><span class="line">        oldPD = self.beliefs</span><br><span class="line">        <span class="comment"># 获取吃豆人的位置</span></span><br><span class="line">        pacmanPosition = gameState.getPacmanPosition()</span><br><span class="line">        <span class="comment"># 获得当前地图中监狱的位置</span></span><br><span class="line">        jailPosition = self.getJailPosition()</span><br><span class="line">        <span class="comment"># 建立新的离散分布对象以存储新的置信网络数据</span></span><br><span class="line">        newPD = DiscreteDistribution()</span><br><span class="line">        <span class="comment"># 遍历所有鬼怪可能出现的位置，并实现精确推理的核心步骤</span></span><br><span class="line">        <span class="keyword">for</span> ghostPosition <span class="keyword">in</span> self.allPositions:</span><br><span class="line">            newPD[ghostPosition] = self.getObservationProb(observation,</span><br><span class="line">                                pacmanPosition, ghostPosition, jailPosition) * oldPD[ghostPosition]</span><br><span class="line">        <span class="comment"># 将新的置信网络更新到self.beliefs中</span></span><br><span class="line">        self.beliefs = newPD</span><br><span class="line">        <span class="comment"># 最后，将置信网络进行归一化，这一步是最重要的，千万不能忘</span></span><br><span class="line">        self.beliefs.normalize()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">elapseTime</span>(<span class="params">self, gameState</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Predict beliefs in response to a time step passing from the current</span></span><br><span class="line"><span class="string">        state.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        The transition model is not entirely stationary: it may depend on</span></span><br><span class="line"><span class="string">        Pacman&#x27;s current position. However, this is not a problem, as Pacman&#x27;s</span></span><br><span class="line"><span class="string">        current position is known.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">        <span class="comment"># 此题的测试用例1是随机走的Ghost，测试用例2和3是一直往下走的Ghost</span></span><br><span class="line">        <span class="comment"># 获取旧的置信网络数据(其实就是一个离散分布)</span></span><br><span class="line">        oldPD = self.beliefs</span><br><span class="line">        <span class="comment"># 建立新的离散分布对象以存储新的置信网络数据</span></span><br><span class="line">        newPD = DiscreteDistribution()</span><br><span class="line">        <span class="comment"># 遍历所有鬼怪所有可能出现的位置，将每一个可能出现的位置都作为初始位置进行计算</span></span><br><span class="line">        <span class="keyword">for</span> oldPos <span class="keyword">in</span> self.allPositions:</span><br><span class="line">            <span class="comment"># 根据Time Elapse算法内容，我们得到接下来鬼怪可能存在位置的离散分布</span></span><br><span class="line">            newPosDist = self.getPositionDistribution(gameState, oldPos)</span><br><span class="line">            <span class="comment"># 新的置信网络中的数据需要将所有从oldPos出发达到newPos的可能性进行累加</span></span><br><span class="line">            <span class="keyword">for</span> newPos <span class="keyword">in</span> self.allPositions:</span><br><span class="line">                <span class="comment"># 考虑到从oldPos到达newPos的概率可能为0，我们可以在这里做一些优化</span></span><br><span class="line">                <span class="keyword">if</span> newPosDist[newPos]&gt;<span class="number">0</span>:</span><br><span class="line">                    newPD[newPos] += newPosDist[newPos]*oldPD[oldPos]</span><br><span class="line">        <span class="comment"># 将新的置信网络更新到self.beliefs中</span></span><br><span class="line">        self.beliefs = newPD</span><br><span class="line">        <span class="comment"># 最后，将置信网络进行归一化</span></span><br><span class="line">        self.beliefs.normalize()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">getBeliefDistribution</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.beliefs</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ParticleFilter</span>(<span class="title class_ inherited__">InferenceModule</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    A particle filter for approximately tracking a single ghost.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, ghostAgent, numParticles=<span class="number">300</span></span>):</span><br><span class="line">        InferenceModule.__init__(self, ghostAgent)</span><br><span class="line">        self.setNumParticles(numParticles)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setNumParticles</span>(<span class="params">self, numParticles</span>):</span><br><span class="line">        self.numParticles = numParticles</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">initializeUniformly</span>(<span class="params">self, gameState</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Initialize a list of particles. Use self.numParticles for the number of</span></span><br><span class="line"><span class="string">        particles. Use self.legalPositions for the legal board positions where</span></span><br><span class="line"><span class="string">        a particle could be located. Particles should be evenly (not randomly)</span></span><br><span class="line"><span class="string">        distributed across positions in order to ensure a uniform prior. Use</span></span><br><span class="line"><span class="string">        self.particles for the list of particles.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.particles = []</span><br><span class="line">        <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">        <span class="comment"># 所谓样本的初始化，就是将一堆样本放到给定的空间中</span></span><br><span class="line">        <span class="comment"># 假设空间范围为[1,10]，现在有1000个样本，如果平均分布，那么1到10各取100次就是这个采样分布，形如：</span></span><br><span class="line">        <span class="comment"># [1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10,1,2,3,……,7,8,9,10,1,2,3,4,5,6,7,8,9,10]</span></span><br><span class="line">        <span class="comment"># 结合当前的实际问题，鬼怪可能存在的所有位置就是此题的样本空间</span></span><br><span class="line">        self.particles += self.legalPositions*(self.numParticles//<span class="built_in">len</span>(self.legalPositions))</span><br><span class="line">        <span class="comment"># 还要考虑特殊情况：样本总数不能整除空间尺寸，比如空间范围为[1,10]，但是样本数量为95</span></span><br><span class="line">        self.particles += self.legalPositions[:(self.numParticles%<span class="built_in">len</span>(self.legalPositions))]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">observeUpdate</span>(<span class="params">self, observation, gameState</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Update beliefs based on the distance observation and Pacman&#x27;s position.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        The observation is the noisy Manhattan distance to the ghost you are</span></span><br><span class="line"><span class="string">        tracking.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        There is one special case that a correct implementation must handle.</span></span><br><span class="line"><span class="string">        When all particles receive zero weight, the list of particles should</span></span><br><span class="line"><span class="string">        be reinitialized by calling initializeUniformly. The total method of</span></span><br><span class="line"><span class="string">        the DiscreteDistribution may be useful.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">        <span class="comment"># 获取吃豆人的位置</span></span><br><span class="line">        pacmanPosition = gameState.getPacmanPosition()</span><br><span class="line">        <span class="comment"># 获得当前地图中监狱的位置</span></span><br><span class="line">        jailPosition = self.getJailPosition()</span><br><span class="line">        <span class="comment"># 建立新的离散分布对象以存储新的置信网络数据</span></span><br><span class="line">        newPD = DiscreteDistribution()</span><br><span class="line">        <span class="comment"># 本算法通过观察样本出现的概率，更新置信网络中的数据</span></span><br><span class="line">        <span class="comment"># 与精确推理不同，计算中不需要用到oldPD，即旧的置信网络的值</span></span><br><span class="line">        <span class="keyword">for</span> ghostPosition <span class="keyword">in</span> self.particles:</span><br><span class="line">            newPD[ghostPosition] += \</span><br><span class="line">                self.getObservationProb(observation, pacmanPosition, ghostPosition, jailPosition)</span><br><span class="line">        <span class="comment"># 根据注释的提示，需要考虑特殊情况，即置所有样本的概率总和为0，就调用初始化方法</span></span><br><span class="line">        <span class="keyword">if</span> newPD.total()==<span class="number">0</span>:</span><br><span class="line">            self.initializeUniformly(gameState)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># 最后，将置信网络进行归一化</span></span><br><span class="line">            newPD.normalize()</span><br><span class="line">            <span class="comment"># 再次生成新的样本(因为置信网络中的数据发生了变化，所以必须重新采样，以更新置信网络)</span></span><br><span class="line">            self.particles = [newPD.sample() <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(self.numParticles)]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">elapseTime</span>(<span class="params">self, gameState</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Sample each particle&#x27;s next state based on its current state and the</span></span><br><span class="line"><span class="string">        gameState.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">        PosDist = &#123;&#125;</span><br><span class="line">        <span class="comment"># 基本思想就是将下一步鬼怪可能出现位置作为样本按照给定的离散分布规律放在self.particles中</span></span><br><span class="line">        <span class="comment"># 与之前一样，此题的测试用例1是随机走的Ghost，测试用例2和3是一直往下走的Ghost</span></span><br><span class="line">        <span class="comment"># 更新样本数据的方法，就是从旧的样本数据中衍生出新的样本数据</span></span><br><span class="line">        <span class="keyword">for</span> index,particle <span class="keyword">in</span> <span class="built_in">enumerate</span>(self.particles):</span><br><span class="line">            <span class="comment"># 在项目说明中提示我们要降低对self.getPositionDistribution的调用次数</span></span><br><span class="line">            <span class="comment"># 为了达到上述目的，我们预先设置一个以particle为键的字典，值为该particle对应的PositionDistribution</span></span><br><span class="line">            <span class="keyword">if</span> particle <span class="keyword">not</span> <span class="keyword">in</span> PosDist.keys():</span><br><span class="line">                newPosDist = self.getPositionDistribution(gameState, particle)</span><br><span class="line">                PosDist[particle] = newPosDist</span><br><span class="line">            <span class="comment"># 接着，我们就可以直接使用字典PosDist中的已经计算好的PositionDistribution数据进行采样</span></span><br><span class="line">            newParticle = PosDist[particle].sample()</span><br><span class="line">            <span class="comment"># 最后用采样出来的数据代替原始的样本</span></span><br><span class="line">            self.particles[index] = newParticle</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">getBeliefDistribution</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Return the agent&#x27;s current belief state, a distribution over ghost</span></span><br><span class="line"><span class="string">        locations conditioned on all evidence and time passage. This method</span></span><br><span class="line"><span class="string">        essentially converts a list of particles into a belief distribution.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        This function should return a normalized distribution.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">        <span class="comment"># 构造离散分布对象用于存放概率分布</span></span><br><span class="line">        belief = DiscreteDistribution()</span><br><span class="line">        <span class="comment"># 接着只需要对以样本为键的字典对象进行+1计数，即可得到每一个样本出现的次数</span></span><br><span class="line">        <span class="keyword">for</span> particle <span class="keyword">in</span> self.particles:</span><br><span class="line">            belief[particle] += <span class="number">1</span></span><br><span class="line">        <span class="comment"># 最后，千万不要忘记归一化，并返回</span></span><br><span class="line">        belief.normalize()</span><br><span class="line">        <span class="comment"># 注意，不要返回上面这句话，归一化函数没有返回值</span></span><br><span class="line">        <span class="keyword">return</span> belief</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">JointParticleFilter</span>(<span class="title class_ inherited__">ParticleFilter</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    JointParticleFilter tracks a joint distribution over tuples of all ghost</span></span><br><span class="line"><span class="string">    positions.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, numParticles=<span class="number">600</span></span>):</span><br><span class="line">        self.setNumParticles(numParticles)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">initialize</span>(<span class="params">self, gameState, legalPositions</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Store information about the game, then initialize particles.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.numGhosts = gameState.getNumAgents() - <span class="number">1</span></span><br><span class="line">        self.ghostAgents = []</span><br><span class="line">        self.legalPositions = legalPositions</span><br><span class="line">        self.initializeUniformly(gameState)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">initializeUniformly</span>(<span class="params">self, gameState</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Initialize particles to be consistent with a uniform prior. Particles</span></span><br><span class="line"><span class="string">        should be evenly distributed across positions in order to ensure a</span></span><br><span class="line"><span class="string">        uniform prior.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.particles = []</span><br><span class="line">        <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">        <span class="comment"># 所谓联合采样，就是采样空间中的数据，不再是一个单独的值，而是若干数据的组合</span></span><br><span class="line">        <span class="comment"># 假设有4个鬼怪，则采样数据中的每一个元素都将会是一个四元组</span></span><br><span class="line">        <span class="comment"># itertools.product的第一个参数表示取值范围，参数repeat表示元组中的元素数量</span></span><br><span class="line">        permutations = <span class="built_in">list</span>(itertools.product(self.legalPositions, repeat=self.numGhosts))</span><br><span class="line">        <span class="comment"># 题目要求打乱上述排列中的内容，以得到一个乱序的采样空间</span></span><br><span class="line">        random.shuffle(permutations)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 依然按照Particle Filter算法的方法进行初始化，从给定的采样空间permutations中选取样本</span></span><br><span class="line">        self.particles += permutations*(self.numParticles//<span class="built_in">len</span>(permutations))</span><br><span class="line">        <span class="comment"># 依然要考虑特殊情况：样本总数不能整除空间尺寸，比如空间范围为[1,10]，但是样本数量为95</span></span><br><span class="line">        self.particles += permutations[:(self.numParticles%<span class="built_in">len</span>(permutations))]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">addGhostAgent</span>(<span class="params">self, agent</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Each ghost agent is registered separately and stored (in case they are</span></span><br><span class="line"><span class="string">        different).</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.ghostAgents.append(agent)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">getJailPosition</span>(<span class="params">self, i</span>):</span><br><span class="line">        <span class="keyword">return</span> (<span class="number">2</span> * i + <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">observe</span>(<span class="params">self, gameState</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Resample the set of particles using the likelihood of the noisy</span></span><br><span class="line"><span class="string">        observations.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        observation = gameState.getNoisyGhostDistances()</span><br><span class="line">        self.observeUpdate(observation, gameState)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">observeUpdate</span>(<span class="params">self, observation, gameState</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Update beliefs based on the distance observation and Pacman&#x27;s position.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        The observation is the noisy Manhattan distances to all ghosts you</span></span><br><span class="line"><span class="string">        are tracking.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        There is one special case that a correct implementation must handle.</span></span><br><span class="line"><span class="string">        When all particles receive zero weight, the list of particles should</span></span><br><span class="line"><span class="string">        be reinitialized by calling initializeUniformly. The total method of</span></span><br><span class="line"><span class="string">        the DiscreteDistribution may be useful.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">        <span class="comment"># 算法思想与Particle Filter类似，只不过概率的计算方法要考虑到多个鬼怪的组合</span></span><br><span class="line">        <span class="comment"># 获取吃豆人的位置</span></span><br><span class="line">        pacmanPosition = gameState.getPacmanPosition()</span><br><span class="line">        <span class="comment"># 建立新的离散分布对象以存储新的置信网络数据</span></span><br><span class="line">        newPD = DiscreteDistribution()</span><br><span class="line">        <span class="comment"># 本算法通过观察样本的概率，以更新置信网络中的数据</span></span><br><span class="line">        <span class="keyword">for</span> ghostPositions <span class="keyword">in</span> self.particles:</span><br><span class="line">            <span class="comment"># 利用累乘算法，求出4个鬼怪均出现在样本所指位置的概率</span></span><br><span class="line">            prob = <span class="number">1</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(self.numGhosts):</span><br><span class="line">                prob *= self.getObservationProb(observation[i], pacmanPosition, ghostPositions[i], self.getJailPosition(i))</span><br><span class="line">            newPD[ghostPositions] += prob</span><br><span class="line">        <span class="comment"># 根据注释的提示，需要考虑特殊情况，即置所有样本的概率总和为0，就调用初始化方法</span></span><br><span class="line">        <span class="keyword">if</span> newPD.total()==<span class="number">0</span>:</span><br><span class="line">            self.initializeUniformly(gameState)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># 最后，将置信网络进行归一化</span></span><br><span class="line">            newPD.normalize()</span><br><span class="line">            <span class="comment"># 再次生成新的样本(因为置信网络中的数据发生了变化，所以必须重新采样，以计算新的置信网络)</span></span><br><span class="line">            self.particles = [newPD.sample() <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(self.numParticles)]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">elapseTime</span>(<span class="params">self, gameState</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Sample each particle&#x27;s next state based on its current state and the</span></span><br><span class="line"><span class="string">        gameState.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        newParticles = []</span><br><span class="line">        <span class="keyword">for</span> oldParticle <span class="keyword">in</span> self.particles:</span><br><span class="line">            newParticle = <span class="built_in">list</span>(oldParticle)  <span class="comment"># A list of ghost positions</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># now loop through and update each entry in newParticle...</span></span><br><span class="line">            <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">            <span class="comment"># 基本思想就是将下一步鬼怪可能出现位置作为样本，按照给定的离散分布规律放在self.particles中</span></span><br><span class="line">            <span class="comment"># 与之前Particle Filter算法不一样的是，此处的样本是一个包含若干鬼怪位置的元组</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(self.numGhosts):</span><br><span class="line">                newPosDist = self.getPositionDistribution(gameState, newParticle, i, self.ghostAgents[i])</span><br><span class="line">                newParticle[i] = newPosDist.sample()</span><br><span class="line">            <span class="string">&quot;&quot;&quot;*** END YOUR CODE HERE ***&quot;&quot;&quot;</span></span><br><span class="line">            newParticles.append(<span class="built_in">tuple</span>(newParticle))</span><br><span class="line">        self.particles = newParticles</span><br><span class="line"></span><br><span class="line"><span class="comment"># One JointInference module is shared globally across instances of MarginalInference</span></span><br><span class="line">jointInference = JointParticleFilter()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MarginalInference</span>(<span class="title class_ inherited__">InferenceModule</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    A wrapper around the JointInference module that returns marginal beliefs</span></span><br><span class="line"><span class="string">    about ghosts.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">initializeUniformly</span>(<span class="params">self, gameState</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Set the belief state to an initial, prior value.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> self.index == <span class="number">1</span>:</span><br><span class="line">            jointInference.initialize(gameState, self.legalPositions)</span><br><span class="line">        jointInference.addGhostAgent(self.ghostAgent)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">observe</span>(<span class="params">self, gameState</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Update beliefs based on the given distance observation and gameState.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> self.index == <span class="number">1</span>:</span><br><span class="line">            jointInference.observe(gameState)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">elapseTime</span>(<span class="params">self, gameState</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Predict beliefs for a time step elapsing from a gameState.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> self.index == <span class="number">1</span>:</span><br><span class="line">            jointInference.elapseTime(gameState)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">getBeliefDistribution</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Return the marginal belief over a particular ghost by summing out the</span></span><br><span class="line"><span class="string">        others.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        jointDistribution = jointInference.getBeliefDistribution()</span><br><span class="line">        dist = DiscreteDistribution()</span><br><span class="line">        <span class="keyword">for</span> t, prob <span class="keyword">in</span> jointDistribution.items():</span><br><span class="line">            dist[t[self.index - <span class="number">1</span>]] += prob</span><br><span class="line">        <span class="keyword">return</span> dist</span><br></pre></td></tr></table></figure>
    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2023/05/27/python_4/" rel="prev" title="python-P3">
                  <i class="fa fa-chevron-left"></i> python-P3
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2023/05/27/python_6/" rel="next" title="python-P5">
                  python-P5 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lhz</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  




  





</body>
</html>
